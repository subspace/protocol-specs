<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-decex/xdm" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.1.1">
<title data-rh="true">Cross-Domain Messaging (XDM) | Subspace Protocol</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://subspace.github.io/protocol-specs/docs/decex/xdm"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Cross-Domain Messaging (XDM) | Subspace Protocol"><meta data-rh="true" name="description" content="Communication between domains and consensus chain"><meta data-rh="true" property="og:description" content="Communication between domains and consensus chain"><meta data-rh="true" name="keywords" content="xdm,decex,xcm,challenge period,cross-chain messaging,cross-domain messaging"><link data-rh="true" rel="icon" href="/protocol-specs/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://subspace.github.io/protocol-specs/docs/decex/xdm"><link data-rh="true" rel="alternate" href="https://subspace.github.io/protocol-specs/docs/decex/xdm" hreflang="en"><link data-rh="true" rel="alternate" href="https://subspace.github.io/protocol-specs/docs/decex/xdm" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://DQOBF9R1M4-dsn.algolia.net" crossorigin="anonymous"><link rel="search" type="application/opensearchdescription+xml" title="Subspace Protocol" href="/protocol-specs/opensearch.xml">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.24/dist/katex.min.css" integrity="sha384-odtC+0UGzzFL/6PNoE8rX/SPcQDXBJ+uRepguP4QkPCm2LBxH3FA3y+fKSiJ+AmM" crossorigin="anonymous"><link rel="stylesheet" href="/protocol-specs/assets/css/styles.006e31aa.css">
<script src="/protocol-specs/assets/js/runtime~main.504029dd.js" defer="defer"></script>
<script src="/protocol-specs/assets/js/main.315ffdb1.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();null!==e?t(e):window.matchMedia("(prefers-color-scheme: dark)").matches?t("dark"):window.matchMedia("(prefers-color-scheme: light)").matches?t("light"):t("dark")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/protocol-specs/"><div class="navbar__logo"><img src="/protocol-specs/img/logo-black.svg" alt="Subspace Labs Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/protocol-specs/img/logo-white.svg" alt="Subspace Labs Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/protocol-specs/docs/protocol_specifications">Specifications</a><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Network Resources</a><ul class="dropdown__menu"><li><a href="https://explorer.subspace.network/" target="_blank" rel="noopener noreferrer" class="dropdown__link">Subspace Explorer<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://telemetry.subspace.network" target="_blank" rel="noopener noreferrer" class="dropdown__link">Subspace Telemetry<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://polkadot.js.org/apps/?rpc=wss%3A%2F%2Feu-1.gemini-2a.subspace.network%2Fws#/explorer" target="_blank" rel="noopener noreferrer" class="dropdown__link">PolkadotJS Portal<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="navbar__items navbar__items--right"><a href="https://docs.subspace.network" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Documentation<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://github.com/subspace" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently dark mode)" aria-label="Switch between dark and light mode (currently dark mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/protocol-specs/docs/protocol_specifications">Protocol Specifications</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/protocol-specs/docs/crypto_primitives">Cryptographic Primitives</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/protocol-specs/docs/category/consensus">Consensus</a><button aria-label="Expand sidebar category &#x27;Consensus&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/protocol-specs/docs/category/decoupled-execution">Decoupled Execution</a><button aria-label="Collapse sidebar category &#x27;Decoupled Execution&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/protocol-specs/docs/decex/overview">Domains Overview</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/protocol-specs/docs/decex/interfaces">Domains Interfaces</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/protocol-specs/docs/decex/bundles_blocks">Bundles and Domain Blocks</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/protocol-specs/docs/decex/workflow">Workflow</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/protocol-specs/docs/decex/staking">Staking</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/protocol-specs/docs/decex/fraud_proofs">Fraud Proofs</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/protocol-specs/docs/decex/xdm">Cross-Domain Messaging (XDM)</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/protocol-specs/docs/category/fees-and-rewards">Fees and Rewards</a><button aria-label="Expand sidebar category &#x27;Fees and Rewards&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/protocol-specs/docs/runtime">Runtime</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/protocol-specs/docs/glossary">Glossary</a></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/protocol-specs/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/protocol-specs/docs/category/decoupled-execution"><span itemprop="name">Decoupled Execution</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Cross-Domain Messaging (XDM)</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Cross-Domain Messaging (XDM)</h1></header><p>This document describes the current messaging protocol between domains in a trusted code environment (permissioned runtime instantiation). This protocol describes messaging between the consensus chain and any domain and between two domains.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="primitives">Primitives<a href="#primitives" class="hash-link" aria-label="Direct link to Primitives" title="Direct link to Primitives">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="chain">Chain<a href="#chain" class="hash-link" aria-label="Direct link to Chain" title="Direct link to Chain">​</a></h3>
<p>A chain is a blockchain within the Subspace Network. A chain is identified as the Consensus chain or a Domain with a <code>DomainID</code></p>
<div class="language-rust codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-rust codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">pub</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">enum</span><span class="token plain"> </span><span class="token type-definition class-name">ChainId</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token class-name">Consensus</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token class-name">Domain</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token class-name">DomainId</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="domain">Domain<a href="#domain" class="hash-link" aria-label="Direct link to Domain" title="Direct link to Domain">​</a></h3>
<p>A Domain is a blockchain with some application modules. These applications act as senders and receivers of the messages using messaging protocol. A unique identifier identifies each application. Domain operators execute transactions bundled by other operators of the same domain when a new block is available.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="trusted-third-party">Trusted third party<a href="#trusted-third-party" class="hash-link" aria-label="Direct link to Trusted third party" title="Direct link to Trusted third party">​</a></h3>
<p>A trusted third party from the point of view of the domains is the consensus chain, the farmer network for block production. Domains use consensus chain to submit transaction bundles, verify the Message proofs of <code>domain_a</code> on <code>domain_b</code> and submit fraud proofs.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="channel">Channel<a href="#channel" class="hash-link" aria-label="Direct link to Channel" title="Direct link to Channel">​</a></h3>
<p>A Channel is a bi-directional connection between two domains. Channel connection is established when the <code>src_chain_id</code> initiates the channel connection open message, and  <code>dst_chain_id</code> responds with either approval or rejection. Once a connection is open, sending messages back and forth is possible. A Channel would be open until a maximum number of messages are sent. This could be configured or defaulted to the maximum possible value of the <code>Nonce</code> type.</p>
<p>There is a deposit to open a channel between domains. Deposit should be high enough to discourage and make it economically inefficient to DDOS channel initiation connections between domains.</p>
<p>A channel can be closed on either end by the root user. Once closed, the channel will stop sending and receiving any further messages. The Relayer will communicate to the other domain to close the channel and clean up.</p>
<p>A channel can be in one of the following states (<code>State</code>):</p>
<ul>
<li><code>Initiated</code>: When a channel is initiated but has not received acknowledgment from the other domain.</li>
<li><code>Open</code>: When a bi-directional channel is open to relay messages between domains.</li>
<li><code>Closed</code>: When the channel is closed between the domains and stops receiving and sending new messages to the other domain.</li>
</ul>
<p>A Channel is defined as follows</p>
<div class="language-rust codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-rust codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">type</span><span class="token plain"> </span><span class="token type-definition class-name">Channel</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    	</span><span class="token comment" style="color:rgb(98, 114, 164)">// Unique channel identifier within DomainID namespace</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    	channel_id</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token class-name">ChannelID</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    	</span><span class="token comment" style="color:rgb(98, 114, 164)">// State of the channel</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    	state</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token class-name">State</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    	</span><span class="token comment" style="color:rgb(98, 114, 164)">// Next valid Inbox nonce</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    	next_inbox_nonce</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token class-name">Nonce</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    	</span><span class="token comment" style="color:rgb(98, 114, 164)">// Next valid Outbox nonce</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    	next_outbox_nonce</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token class-name">Nonce</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token comment" style="color:rgb(98, 114, 164)">// Latest outbox message nonce for which response was received from dst_chain.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    	latest_response_received_message_nonce</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token class-name">Nonce</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    	</span><span class="token comment" style="color:rgb(98, 114, 164)">// Fee Model for this channel</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    	fee</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token class-name">FeeModel</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    	</span><span class="token comment" style="color:rgb(98, 114, 164)">// Max number of messages to be in outbox at a given time on both domains.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    	max_outgoing_messages</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">u32</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    	</span><span class="token comment" style="color:rgb(98, 114, 164)">/// Owner of the channel</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   	</span><span class="token comment" style="color:rgb(98, 114, 164)">/// Owner maybe None if the channel was initiated on the other chain.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">	maybe_owner</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token class-name">Option</span><span class="token operator">&lt;</span><span class="token class-name">AccountId</span><span class="token operator">&gt;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="channel-inbox">Channel Inbox<a href="#channel-inbox" class="hash-link" aria-label="Direct link to Channel Inbox" title="Direct link to Channel Inbox">​</a></h3>
<p>All the incoming messages to the domain are validated and added to a pool before processing. If specific message arrived earlier than a previous message, it is stored until the previous message(s) is processed in the order of <code>Nonce</code>.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="channel-outbox">Channel Outbox<a href="#channel-outbox" class="hash-link" aria-label="Direct link to Channel Outbox" title="Direct link to Channel Outbox">​</a></h3>
<p>All messages originated from <code>src_chain_id</code> to a <code>dst_chain_id</code> will be added to this queue in the runtime state.</p>
<p>Messages stay in the outbox of <code>src_chain_id</code> until the domain block of <code>src_chain_id</code> containing the originating extrinsic is out of the challenge period or reached archiving depth (if <code>src_chain_id</code> is consensus chain).</p>
<p>There is also a notion of back pressure by limiting maximum number of messages queued <code>max_outgoing_messages</code> to outbox of <code>src_chain_id</code>. So when <code>dst_chain_id</code> doesn’t send any message responses, this should throttle the outbox until normal operation. Message is removed from the outbox once the message response is received from the <code>dst_chain_id</code>.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="channel-response-queue">Channel Response Queue<a href="#channel-response-queue" class="hash-link" aria-label="Direct link to Channel Response Queue" title="Direct link to Channel Response Queue">​</a></h3>
<p>All the message responses to the messages in the outbox are validated and added to this queue. The message responses are passed to the application units within the domain. If a response for message arrived earlier that previous message responses, then this response is stored until the previous message responses are delivered.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="channel-nonce">Channel Nonce<a href="#channel-nonce" class="hash-link" aria-label="Direct link to Channel Nonce" title="Direct link to Channel Nonce">​</a></h3>
<p>Channel nonce is used to order messages with in the channel and to avoid replay attacks.</p>
<p>A domain maintains 2 nonces for each domain and channel:</p>
<ul>
<li><code>Incoming nonce</code>: This nonce is used to order the incoming messages to the domain through the channel from other domain. The nonce starts at 0 and is incremented after each received message.</li>
<li><code>Outgoing nonce</code>: This nonce is used to order the outgoing messages from this domain to the other domains. The nonce starts at 0 and is incremented after every sent message.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="message-proof">Message Proof<a href="#message-proof" class="hash-link" aria-label="Direct link to Message Proof" title="Direct link to Message Proof">​</a></h3>
<p>Message proof that can verify the validity of the message from the point-of-view of the consensus chain. Proof combines the storage proofs to validate messages.</p>
<p>The proof consists of the following components:</p>
<ul>
<li>MMR proof for the state root of the parent consensus block</li>
</ul>
<div class="language-rust codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-rust codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">pub</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">struct</span><span class="token plain"> </span><span class="token type-definition class-name">MMRProof</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    	</span><span class="token comment" style="color:rgb(98, 114, 164)">// consensus block number below archiving depth at which this MMR proof was generated</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    	consensus_block_number	</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    	</span><span class="token comment" style="color:rgb(98, 114, 164)">// Leaf data that contains consensus storage root </span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    	</span><span class="token comment" style="color:rgb(98, 114, 164)">// storage root is used to verify the `ConfirmedDomainBlocks` storage</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    	leaf_data</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    	</span><span class="token comment" style="color:rgb(98, 114, 164)">// merkle proof for this MMR</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    	proof</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li>Proof of the source domain state root and XDM inclusion in runtime</li>
</ul>
<div class="language-rust codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-rust codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">pub</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">struct</span><span class="token plain"> </span><span class="token type-definition class-name">Proof</span><span class="token operator">&lt;</span><span class="token class-name">BlockNumber</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token class-name">BlockHash</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token class-name">StateRoot</span><span class="token operator">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    	</span><span class="token comment" style="color:rgb(98, 114, 164)">// MMR proof, which provides the state root of consensus hash</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    	</span><span class="token class-name">MMRProof</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token comment" style="color:rgb(98, 114, 164)">/// Storage proof that src chain state_root is confirmed on Consensus chain.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token comment" style="color:rgb(98, 114, 164)">/// This is optional when the src_chain is Consensus.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">pub</span><span class="token plain"> domain_confirmed_proof</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token class-name">Option</span><span class="token operator">&lt;</span><span class="token class-name">StorageProof</span><span class="token operator">&gt;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    	</span><span class="token comment" style="color:rgb(98, 114, 164)">// Storage proof that message is processed on src_chain.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">pub</span><span class="token plain"> message_proof</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token class-name">StorageProof</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="message">Message<a href="#message" class="hash-link" aria-label="Direct link to Message" title="Direct link to Message">​</a></h3>
<p>Message encompasses the actual message being sent and metadata about the message itself. MessageID is a unique tuple of (<code>ChannelID</code> , <code>Nonce</code>). There are two types of Message payloads:</p>
<ul>
<li>
<p><code>Protocol</code> payload, used by the protocol to open or close, acknowledge channel connection with other domain.</p>
</li>
<li>
<p><code>Endpoint</code> payload, used by the protocol to pass messages between endpoint on the <code>src</code> and <code>dst</code> domains.</p>
</li>
</ul>
<div class="language-rust codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-rust codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">pub</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">struct</span><span class="token plain"> </span><span class="token type-definition class-name">Message</span><span class="token operator">&lt;</span><span class="token class-name">Balance</span><span class="token operator">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token comment" style="color:rgb(98, 114, 164)">/// Chain (consensus or domain id) that initiated this message.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">pub</span><span class="token plain"> src_chain_id</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token class-name">ChainId</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token comment" style="color:rgb(98, 114, 164)">/// Chain (consensus or domain id) this message is intended for.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">pub</span><span class="token plain"> dst_chain_id</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token class-name">ChainId</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token comment" style="color:rgb(98, 114, 164)">/// ChannelId the message was sent through.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">pub</span><span class="token plain"> channel_id</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token class-name">ChannelId</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token comment" style="color:rgb(98, 114, 164)">/// Message nonce within the channel.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">pub</span><span class="token plain"> nonce</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token class-name">Nonce</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token comment" style="color:rgb(98, 114, 164)">/// Payload of the message</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">pub</span><span class="token plain"> payload</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token class-name">VersionedPayload</span><span class="token operator">&lt;</span><span class="token class-name">Balance</span><span class="token operator">&gt;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token comment" style="color:rgb(98, 114, 164)">/// Last delivered message response nonce on src_chain.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">pub</span><span class="token plain"> last_delivered_message_response_nonce</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token class-name">Option</span><span class="token operator">&lt;</span><span class="token class-name">Nonce</span><span class="token operator">&gt;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The response message follows the same structure except the <code>payload</code> contains either <code>Protocol(Response)</code> or <code>Endpoint(Response)</code></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="message-lifecycle">Message Lifecycle<a href="#message-lifecycle" class="hash-link" aria-label="Direct link to Message Lifecycle" title="Direct link to Message Lifecycle">​</a></h3>
<p>Conceptually, a message can be in one of the following states during its lifecycle:</p>
<p>From the POV of the sender <code>src_chain_id</code>:</p>
<ul>
<li>Outboxed: A message-request is added to the outbox for the relayers to relay message to <code>dst_chain_id</code>. It stays in the outbox until the message-response is received.</li>
<li>Delivered: After message-response is received and executed, the message request is cleared from the outbox.</li>
</ul>
<p>From the POV of the receiver <code>dst_chain_id</code>:</p>
<ul>
<li>Inboxed: A message-request is added to the inbox for the execution and response. It is not executed until the domain block of <code>src_chain_id</code> containing the originating extrinsic is out of the challenge period or reached archiving depth (if <code>src_chain_id</code> is consensus chain).</li>
<li>Cleared: After message-request is executed and message-response is constructed, the message-request is cleared from the inbox and message-response is added to the outbox.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="relayer-component">Relayer Component<a href="#relayer-component" class="hash-link" aria-label="Direct link to Relayer Component" title="Direct link to Relayer Component">​</a></h3>
<p>A relayer component relays message from <code>src_chain_id</code> to <code>dst_chain_id</code>. Domain operators have builtin relayer to relay messages from the domain to other domains and the consensus chain.</p>
<p>Operators on <code>domain_a</code> relay messages originating in <code>domain_a</code> to the consensus network and listen for messages destined to <code>domain_a</code> from any other domain. Messages are sent through the consensus network where all operators of all domains are present.</p>
<p>The payload for the extrinsic could be a message-request or a message-response.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="fees">Fees<a href="#fees" class="hash-link" aria-label="Direct link to Fees" title="Direct link to Fees">​</a></h3>
<p>Fees are collected from the sender of the message on <code>src_chain_id</code> to pay for relay and execution of their message on both <code>src_chain_id</code> and <code>dst_chain_id</code> respectively.</p>
<p>Compute fees are computed based on weights of the exact calls performed on both <code>src_chain_id</code> and <code>dst_chain_id</code> in total. Collected compute fees for the portion of execution happening on <code>src_chain_id</code> is paid to operators of <code>src_chain_id</code> and the compute fees for the portion of execution happening <code>dst_chain_id</code>. The portion of fees that is to be distributed on <code>dst_chain_id</code> is burned on <code>src_chain_id</code> when message is added to outbox.</p>
<p>The burnt fees are subtracted from <code>src_chain_id</code> bookkeeping balance (if it’s a domain).</p>
<p>The relay fee is split equally among operators on <code>src_chain_id</code> and <code>dst_chain_id</code> who have submitted the ER that includes the message.</p>
<p>On the source chain, this reward is distributed when the message gets the response from the <code>dst_chain_id</code>. On the <code>dst_chain_id</code>, when it receives the next message, it will collect all the messages that are marked delivered on <code>src_chain_id</code>, mints the funds, and, distributes the rewards to the relayer pool on <code>dst_chain_id</code> for each message.</p>
<p>The minted fees are added to <code>dst_chain_id</code> bookkeeping balance (if it’s a domain).</p>
<p><strong>Outbox Message Fees</strong></p>
<ol>
<li>User <code>sender</code> sends a message from <code>src_chain_id</code></li>
<li><code>src_chain_id</code> collects <code>fees</code> to be paid by <code>sender</code> as follows:<!-- -->
<ol>
<li>Compute fee for message execution on <code>dst_chain_id</code>. This amount is burnt on <code>src_chain_id</code> and minted on <code>dst_chain_id</code> later.</li>
<li>Relay fee for the relayers on <code>dst_chain_id</code>. This amount is burnt on <code>src_chain_id</code> and minted on <code>dst_chain_id</code> later.</li>
<li>Compute fee for message response execution on <code>src_chain_id</code>.</li>
<li>Relay fee for the relayers on <code>src_chain_id</code> for relaying the response.</li>
</ol>
</li>
<li>Message is sent to <code>dst_chain_id</code>.</li>
<li>Once the response is received from <code>dst_chain_id</code>, <code>src_chain_id</code> distributes the rewards from <code>sender</code> to operators.</li>
<li>This message nonce is sent to <code>dst_chain_id</code> as <code>last_delivered_message_response_nonce</code> as an acknowledgement so that it can rewards its operators.</li>
</ol>
<p><strong>Inbox Message Fees</strong></p>
<ol>
<li><code>dst_chain_id</code> receives a message from <code>src_chain_id</code></li>
<li><code>dst_chain_id</code> mints received fees after message validation</li>
<li>Message is processed and response is sent</li>
<li>After the delivery acknowledgement from <code>src_chain_id</code>, the <code>dst_chain_id</code> distributes the fees from <code>sender</code> equally to operators who have submitted the ER containing the message extrinsic</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="high-level-workflow">High-Level Workflow<a href="#high-level-workflow" class="hash-link" aria-label="Direct link to High-Level Workflow" title="Direct link to High-Level Workflow">​</a></h2>
<p>The following describes the generic message from one domain to another. This message could be a protocol message to initiate or close channel connection or an endpoint specific message through an established Channel. In either case, the base message passing remains same:</p>
<ol>
<li>User submits a transaction with the message and the required fees. The funds are locked in users account.</li>
<li>Message with an assigned <code>nonce</code> is added to the <code>outbox</code> of <code>src_chain_id</code> with a runtime event issued.</li>
<li>The operator of <code>src_chain_id</code> extracts the message and prepares it to be relayed it to the transaction pool of domain <code>dst_chain_id</code>. The relayer needs to construct a storage proof to prove that this message was accepted by domain <code>src_chain_id</code> (by proving the message is included in domain <code>src_chain_id</code> runtime state), and a state root of domain <code>src_chain_id</code> (with respect to a consensus chain state root) so that domain <code>dst_chain_id</code> can verify the storage proof.</li>
<li>Operator of <code>src_chain_id</code> waits until the domain block with the ER containing the state root used to construct the storage proof is cleared from the challenge period before gossiping the message.</li>
<li>Operator of <code>src_chain_id</code> gossips the message to the consensus network where all other operators are connected.</li>
<li>Operators of <code>dst_chain_id</code> listen to gossip on consensus and takes the message bound for <code>dst_chain_id</code> into its domain transaction pool while ignoring other messages.</li>
<li>Message proof is validated and if valid added to the inbox of <code>dst_chain_id</code>.</li>
<li>Next message nonce is taken from the inbox of <code>dst_chain_id</code>.</li>
<li>Message is executed and response is stored.</li>
<li>Operator of <code>dst_chain_id</code> waits until the domain block with the message transaction is cleared from the challenge period before gossiping the message response.</li>
<li>Message response on  <code>src_chain_id</code> is validated using storage proofs on the consensus chain.</li>
<li>Next Message response nonce is submitted to the endpoint and message is removed from the outbox of <code>src_chain_id</code>.</li>
<li>When the <code>src_chain_id</code> prepares the next message, it will include the latest message nonce that was successful as part of the payload to notify <code>dst_chain_id</code> of message response acknowledgement.</li>
</ol>
<p><img decoding="async" loading="lazy" alt="XDM" src="/protocol-specs/assets/images/XDM-62b55026f65238ef0bd4291e43b4819a.png" width="2297" height="3002" class="img_ev3q"></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="networking">Networking<a href="#networking" class="hash-link" aria-label="Direct link to Networking" title="Direct link to Networking">​</a></h2>
<p>The messaging protocol uses the consensus network to relay messages, since all the operators of all the domains must also be connected to the consensus network.</p>
<p>This model assumes that there is at least one <code>dst_chain_id</code> domain operator to pick the transaction and include in the bundle. If there are no operators to pick the transaction, message could be undelivered until its resubmitted in the network.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="type-definitions">Type definitions<a href="#type-definitions" class="hash-link" aria-label="Direct link to Type definitions" title="Direct link to Type definitions">​</a></h2>
<ul>
<li><code>ChainId</code>: enum that identifies whether the chain is Consensus or a Domain with <code>DomainId</code></li>
<li><code>DomainID</code>: uniquely identifies a given Domain, <code>U32</code>.</li>
<li><code>ChannelId</code>: uniquely identifies a channel, <code>U256</code>.</li>
<li><code>AccountId</code>: is the public key of the User account</li>
<li><code>Nonce</code>: is an incrementing value used for ordering message and avoid replay attacks. We also use nonce as the message ID for a given domain for a given channel, <code>U256</code>.</li>
<li><code>MessageId</code>: uniquely identifies a message, a tuple <code>(ChannelId, Nonce)</code></li>
<li><code>EndpointId</code> : represents a unique id of the endpoint on a domain, <code>U64</code>.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="functions">Functions<a href="#functions" class="hash-link" aria-label="Direct link to Functions" title="Direct link to Functions">​</a></h2>
<p>Detailed description of each function required to be present in the protocol.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="chain-allow-list">Chain Allow List<a href="#chain-allow-list" class="hash-link" aria-label="Direct link to Chain Allow List" title="Direct link to Chain Allow List">​</a></h2>
<p>Consensus chain maintains a <code>ChainAllowList</code> to keep track of the authorized domain chains that can establish channels with the Consensus chain. <code>ChainAllowList</code> can be defined at Genesis and can be updated later by the sudo account adding or removing chains.</p>
<p>When a Consensus chain receives an <code>initiate_channel</code> XDM to open the channel, if the <code>src_chain</code> is in the allowlist, then channel is opened else XDM is rejected.
Practically, this means that a newly initialized domain chain needs to be approved by governance and added to the Consensus chain&#x27;s <code>ChainAllowList</code> before it can initiate a channel with the Consensus chain.</p>
<p>Similarly, each domain chain maintains its own <code>DomainChainAllowList</code> to keep track of the authorized domains it can establish channels with. This allows the domains to control and restrict which other domains they want to interact with. Updating domain-specific lists is done within a domain by the domain&#x27;s sudo or governance, without consensus chain approval.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="initiate-channel">Initiate Channel<a href="#initiate-channel" class="hash-link" aria-label="Direct link to Initiate Channel" title="Direct link to Initiate Channel">​</a></h3>
<ol>
<li>Channel <code>initiate_channel</code> transaction is sent by the root user of the domain.</li>
<li>If the domain is in the allow list, the next available <code>ChannelID</code> is assigned to the new channel.</li>
<li>If no Channel exits, Channel is created and set to <code>Initiated</code> status and cannot accept or receive any messages yet.</li>
<li><code>Protocol</code> payload message to open the channel is added to the <code>src_chain_id</code> domain outbox with nonce <code>0</code></li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="open-channel">Open Channel<a href="#open-channel" class="hash-link" aria-label="Direct link to Open Channel" title="Direct link to Open Channel">​</a></h3>
<p>Before sending any messages, domain needs to have an channel open with the <code>dst_chain_id</code>:</p>
<ol>
<li>Channel is initiated by <code>src_chain_id</code> as described in <a href="#initiate-channel">Initiate Channel</a></li>
<li>Operator on <code>dst_chain_id</code> receives a message with the corresponding <code>Protocol</code> <code>ChannelOpen</code> payload and <code>nonce=0</code>.</li>
<li>Channel status is set to <code>Open</code> and a corresponding event is issued</li>
<li>Operators on <code>dst_domain</code> submits the transaction with message response to <code>src_chain_id</code></li>
<li><code>src_domain</code> moves the channel state to <code>Open</code> and starts accepting messages to be sent over channel</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="close-channel">Close Channel<a href="#close-channel" class="hash-link" aria-label="Direct link to Close Channel" title="Direct link to Close Channel">​</a></h3>
<p>Any domain of either end of the open channel can close the channel:</p>
<ol>
<li>Channel close transaction is sent by the root user.</li>
<li>Channel state is set to <code>Closed</code></li>
<li><code>Protocol</code> payload message to close channel is added to the <code>src_chain_id</code> outbox</li>
<li>Operator on <code>src_chain_id</code> gossips the message</li>
<li>Operator on <code>dst_chain_id</code> receives a message with the corresponding <code>Protocol</code> <code>ChannelClose</code> payload.</li>
<li>Channel close response is submitted to <code>src_chain_id</code></li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="send-message">Send message<a href="#send-message" class="hash-link" aria-label="Direct link to Send message" title="Direct link to Send message">​</a></h3>
<p>When user wants to send message from endpoint on <code>src_chain_id</code> to an endpoint on <code>dst_chain_id</code>  with open channel to <code>dst_chain_id</code>.</p>
<ol>
<li>User sends a transaction that results in a message to an endpoint on <code>dst_chain_id</code>.</li>
<li>Transaction is included in the runtime state of <code>src_chain_id</code>.</li>
<li>A next incrementing <code>nonce</code> &gt; 0 (0 is always reserved for Channel open message) is assigned to the message bound to <code>dst_chain_id</code>.</li>
<li>Next message nonce storage is updated.</li>
<li>Execution layer stores the message in the <code>Outbox</code> and emits <code>new_message</code> event.</li>
<li>Operator of <code>src_chain_id</code> waits until the domain block with the ER containing the state root used to construct the storage proof is cleared from the challenge period before gossiping the message (or below archiving depth if <code>src_chain_id</code> is consensus chain).</li>
<li>The operator of <code>src_chain_id</code> extracts the message and prepares it to be relayed it to the transaction pool of domain <code>dst_chain_id</code>. The relayer needs to construct a storage proof to prove that this message was accepted by domain <code>src_chain_id</code> (by proving the message is included in domain <code>src_chain_id</code> runtime state), and a state root of domain <code>src_chain_id</code> (with respect to a parent consensus chain state root via MMR) so that domain <code>dst_chain_id</code> can verify the storage proof.</li>
<li>Operator of <code>src_chain_id</code> gossips the message to the consensus network where all other operators are connected.</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="receive-message">Receive message<a href="#receive-message" class="hash-link" aria-label="Direct link to Receive message" title="Direct link to Receive message">​</a></h3>
<p>When a relayer from <code>src_chain_id</code> submits the message to the inbox of the <code>dst_chain_id</code>:</p>
<ol>
<li><code>dst_chain_id</code> verifies the message by verifying the storage proof from the point of view of the consensus chain as follows:<!-- -->
<ol>
<li>Check if the MMR proof is constructed at a finalized consensus block to ensure the <code>MMR::verify_proof</code> result is deterministic regardless of the consensus chain fork.</li>
<li>Verifies MMR proof using consensus chain <code>MMR::verify_proof</code> function to extract the MMR leaf data and the corresponding state root of consensus chain.</li>
<li>Using <code>consensus_chain_state_root</code>, <code>domain_confirmed_proof</code> is verified and associated domain’s <code>state_root</code> is extracted from <code>DomainBlockInfo</code></li>
<li>Using <code>domain_state_root</code>, <code>message_proof</code> is verified and actual XDM is extracted from the storage proof.</li>
</ol>
</li>
<li><code>dst_chain_id</code> adds the message to its inbox.</li>
<li><code>dst_chain_id</code> listens for next message to process from the inbox in the nonce order.</li>
<li>Message is passed to the endpoint and eventually executed and response is stored for that message.</li>
<li><code>dst_chain_id</code> takes the latest delivered message nonce on <code>src_chain_id</code> and distributes the rewards to the operators and deletes any stored state pertaining to any message with nonce below the confirmed nonce.</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="receive-message-response">Receive message response<a href="#receive-message-response" class="hash-link" aria-label="Direct link to Receive message response" title="Direct link to Receive message response">​</a></h3>
<p>Relayer from the <code>dst_chain_id</code> will submit the message response to the <code>src_chain_id</code>:</p>
<ol>
<li><code>src_chain_id</code> verifies the message response and adds it to the message response queue.</li>
<li><code>src_chain_id</code> listens for next message response and submits the response to the caller module on the <code>src_domain</code></li>
<li><code>src_chain_id</code> marks the message nonce as the last confirmed message which is included in the next message bound to <code>dst_chain_id</code></li>
<li><code>src_chain_id</code> then deletes the state pertaining to the original message from the runtime.</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="xdm-delays">XDM delays<a href="#xdm-delays" class="hash-link" aria-label="Direct link to XDM delays" title="Direct link to XDM delays">​</a></h2>
<p>Since XDM is inherently a request response protocol it may require a response in some cases.</p>
<p>The use cases such as transfer or sending some payload where response is just an acknowledgement, it is generally ignored. With that in mind, the following table will give the time to send a message from <code>Any chain -&gt; Any chain</code></p>
<p>Where <code>K = Archiving depth</code> (currently 100 consensus blocks) and <code>D = Domain challenge period</code> (currently 14400 domain blocks)</p>
<table><thead><tr><th>Domain → Any chain</th><th>Consensus → Any domain</th></tr></thead><tbody><tr><td>K + D</td><td>K</td></tr></tbody></table>
<p>For XDM where response is required from, the following table captures the time in blocks</p>
<table><thead><tr><th>Domain → Consensus → Domain</th><th>Consensus → Domain → Consensus</th><th>Domain A → Domain B → Domain A</th></tr></thead><tbody><tr><td>2 * K + D</td><td>D + 2 * K</td><td>2 * K + 2 * D</td></tr></tbody></table></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/protocol-specs/docs/decex/fraud_proofs"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Fraud Proofs</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/protocol-specs/docs/category/fees-and-rewards"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Fees and Rewards</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#primitives" class="table-of-contents__link toc-highlight">Primitives</a><ul><li><a href="#chain" class="table-of-contents__link toc-highlight">Chain</a></li><li><a href="#domain" class="table-of-contents__link toc-highlight">Domain</a></li><li><a href="#trusted-third-party" class="table-of-contents__link toc-highlight">Trusted third party</a></li><li><a href="#channel" class="table-of-contents__link toc-highlight">Channel</a></li><li><a href="#channel-inbox" class="table-of-contents__link toc-highlight">Channel Inbox</a></li><li><a href="#channel-outbox" class="table-of-contents__link toc-highlight">Channel Outbox</a></li><li><a href="#channel-response-queue" class="table-of-contents__link toc-highlight">Channel Response Queue</a></li><li><a href="#channel-nonce" class="table-of-contents__link toc-highlight">Channel Nonce</a></li><li><a href="#message-proof" class="table-of-contents__link toc-highlight">Message Proof</a></li><li><a href="#message" class="table-of-contents__link toc-highlight">Message</a></li><li><a href="#message-lifecycle" class="table-of-contents__link toc-highlight">Message Lifecycle</a></li><li><a href="#relayer-component" class="table-of-contents__link toc-highlight">Relayer Component</a></li><li><a href="#fees" class="table-of-contents__link toc-highlight">Fees</a></li></ul></li><li><a href="#high-level-workflow" class="table-of-contents__link toc-highlight">High-Level Workflow</a></li><li><a href="#networking" class="table-of-contents__link toc-highlight">Networking</a></li><li><a href="#type-definitions" class="table-of-contents__link toc-highlight">Type definitions</a></li><li><a href="#functions" class="table-of-contents__link toc-highlight">Functions</a></li><li><a href="#chain-allow-list" class="table-of-contents__link toc-highlight">Chain Allow List</a><ul><li><a href="#initiate-channel" class="table-of-contents__link toc-highlight">Initiate Channel</a></li><li><a href="#open-channel" class="table-of-contents__link toc-highlight">Open Channel</a></li><li><a href="#close-channel" class="table-of-contents__link toc-highlight">Close Channel</a></li><li><a href="#send-message" class="table-of-contents__link toc-highlight">Send message</a></li><li><a href="#receive-message" class="table-of-contents__link toc-highlight">Receive message</a></li><li><a href="#receive-message-response" class="table-of-contents__link toc-highlight">Receive message response</a></li></ul></li><li><a href="#xdm-delays" class="table-of-contents__link toc-highlight">XDM delays</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Subspace Network</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://subspace.network" target="_blank" rel="noopener noreferrer" class="footer__link-item">Official Website<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/subspace/subspace-desktop" target="_blank" rel="noopener noreferrer" class="footer__link-item">Subspace Desktop<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://polkadot.js.org/apps/?rpc=wss%3A%2F%2Ftest-rpc.subspace.network#/explorer" target="_blank" rel="noopener noreferrer" class="footer__link-item">Subspace Explorer<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://testnet-relayer.subspace.network/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Subspace Relayer<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/subspace" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://discord.gg/subspace-network" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://t.me/subspace_network" target="_blank" rel="noopener noreferrer" class="footer__link-item">Telegram<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Social</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.youtube.com/channel/UCojYRCZOtVTJHJXivOYJzeQ" target="_blank" rel="noopener noreferrer" class="footer__link-item">YouTube<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.linkedin.com/company/subspace-blockchain" target="_blank" rel="noopener noreferrer" class="footer__link-item">LinkedIn<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/network_subspace" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://medium.com/subspace-network" target="_blank" rel="noopener noreferrer" class="footer__link-item">Medium<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://app.subsocial.network/@NetworkSubspace" target="_blank" rel="noopener noreferrer" class="footer__link-item">Subsocial<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="margin-bottom--sm"><a href="https://subspace.network" rel="noopener noreferrer" class="footerLogoLink_BH7S"><img src="/protocol-specs/img/banner-black.svg" alt="Subspace Labs Banner Logo" class="footer__logo themedComponent_mlkZ themedComponent--light_NVdE"><img src="/protocol-specs/img/banner-white.svg" alt="Subspace Labs Banner Logo" class="footer__logo themedComponent_mlkZ themedComponent--dark_xIcU"></a></div><div class="footer__copyright">Copyright © 2025 Subspace Labs, Inc.</div></div></div></footer></div>
</body>
</html>